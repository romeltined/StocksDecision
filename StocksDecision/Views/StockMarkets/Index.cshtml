@model IEnumerable<StocksDecision.Models.StockMarket>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Add Symbol", "Create")
</p>

@section scripts {
    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="/Scripts/jquery-1.10.2.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="/Scripts/jquery.signalR-2.2.2.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="/signalr/hubs"></script>
    <!--Reference the StockTicker script. -->
    <script src="/Scripts/StockTicker.js"></script>

}
<div id="loading">Loading <span class="glyphicon glyphicon-refresh"></span></div>
<div id="stockTable" style="display:none">
    <table id="stockMarket" class="table table-hover table-condensed table-responsive">
        <thead>
            <tr><th>Symbol</th><th>Shares</th><th>Last Price</th><th>Mkt Value</th><th>Gain/Loss</th><th>Buy Target</th><th>Buy?</th><th>Sell Target</th><th>Sell?</th><th></th></tr>
        </thead>
        <tbody>
            @if(Model!=null)
            {
                foreach (var item in Model)
                {
                    <tr data-value= "@item.Symbol">
                        <td style="display:none">@item.Symbol</td>
                        <td><span class="fa fa-line-chart" style="font-size:12px;color:green"></span>
                            @Html.ActionLink(item.Symbol, "../Stocks/FilterIndex", new { symbol = item.Symbol })
                        </td>
                        @{var idq = @item.Symbol + "Quantity";
                        }
                        <td id=@idq>
                            @Html.DisplayFor(modelItem => item.Quantity)
                        </td>
                        <td><span class="glyphicon glyphicon-refresh"></span></td>              
                        <td><span class="glyphicon glyphicon-refresh"></span></td>
                        <td><span class="glyphicon glyphicon-refresh"></span></td>
                        @{var idB = @item.Symbol + "Buy";
                        }
                        <td id=@idB>
                            @Html.DisplayFor(modelItem => item.BuyTarget)
                        </td>
                        <td><span class="glyphicon glyphicon-refresh"></span></td>
                        @{var idS = @item.Symbol + "Sell";
                        }
                        <td id=@idS>
                            @Html.DisplayFor(modelItem => item.SellTarget)
                        </td>
                        <td><span class="glyphicon glyphicon-refresh"></span></td>
                        <td>
                            <a href="/StockMarkets/Edit/#"><span class="glyphicon glyphicon-edit"></span></a> |
                            <a href="/StockMarkets/Delete/#"><span class="glyphicon glyphicon-trash"></span></a> |
                            <a href="/Stocks/Index?searchString=@item.Symbol"><span class="glyphicon glyphicon-list-alt"></span></a>
                        </td>
                        @{var idId = @item.Symbol + "Id";
                        }
                        <td id=@idId style="display:none;">
                           @item.Id
                        </td>
                    </tr>
                }
            }

        </tbody>
    </table>
</div>

